<%= render 'creatives/navbar' %>

<header id="header_city_omg">
  <div class="header-content">
    <div class="header-content-inner" id="title_cities">
      <h1><%= @city_name %></h1>
      <hr>
      <p>Listing all attractions for <%= @city_name %></p>
      <a href="#show_list" class="btn btn-primary btn-xl page-scroll">Go</a>
    </div>
  </div>
</header>

<section id="show_list">
  <table id="table_data" class="table table-striped table-bordered" cellspacing="0" width="100%">
    <thead>
    <tr>
      <th>Title</th>
      <th>Price</th>
      <th>Description</th>
    </tr>
    </thead>
    <tfoot>
    <tr>
      <th>Title</th>
      <th>Price</th>
      <th>Description</th>
    </tr>
    </tfoot>
  </table>
</section>

<script>
    $(document).ready(function () {
        $('#table_data').DataTable({
            "processing": true,
            ajax: {
                "url": "http://localhost:5000/data/city/" + <%= @city_id %>
            },
            "columns":
                [
                    {data: "title"},
                    {
                        data: "price", render: function (data, type, row) {
                        if (type === 'display') {
                            var numberRenderer = $.fn.dataTable.render.number(',', '.', 0, '$').display;
                            return numberRenderer(data);
                        }
                        return data;
                    }
                    },
                    {
                        data: "id", render: function (data, type, row) {
                        return '<a href="https://pure-coast-27115.herokuapp.com/attraction_detail/' + data + '">Learn more <span class="glyphicon glyphicon-circle-arrow-right" aria-hidden="true"></span></a>';
                    }
                    }
                ],
            "lengthMenu":
                [[15, 25, 50, 100, -1], [15, 25, 50, 100, "All"]]
        })
        ;
    });
</script>
